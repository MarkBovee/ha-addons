name: Energy Prices
description: Fetch Nord Pool electricity prices and calculate final costs with configurable price components
version: "1.3.2"
slug: energy_prices
init: false
homeassistant_api: true
arch:
  - aarch64
  - amd64
  - armhf
  - armv7
  - i386

# Options schema for UI-managed settings
options:
  delivery_area: "NL"
  currency: "EUR"
  timezone: "CET"
  fetch_interval_minutes: 60
  
  # Import price components (buying from grid)
  # Values in EUR/kWh (e.g., 0.0248 = 2.48 cents)
  import_vat_multiplier: 1.21
  import_markup: 0.0248
  import_energy_tax: 0.1228
  
  # Export price components (selling to grid / feed-in)
  # Using same values as import for Dutch salderingsregeling
  # Values in EUR/kWh (e.g., 0.0248 = 2.48 cents)
  export_vat_multiplier: 1.21
  export_markup: 0.0248
  export_energy_tax: 0.1228
  
  # MQTT settings for Home Assistant Mosquitto broker
  # Get credentials from Mosquitto add-on configuration
  mqtt_host: "core-mosquitto"
  mqtt_port: 1883
  mqtt_user: ""
  mqtt_password: ""

# Schema defines the data types for validation
schema:
  delivery_area: str
  currency: str
  timezone: str
  fetch_interval_minutes: int
  import_vat_multiplier: float
  import_markup: float
  import_energy_tax: float
  export_vat_multiplier: float
  export_markup: float
  export_energy_tax: float
  # Advanced: MQTT settings (optional - auto-detects core-mosquitto by default)
  mqtt_host: str?
  mqtt_port: int?
  mqtt_user: str?
  mqtt_password: str?